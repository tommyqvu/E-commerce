{"ast":null,"code":"import _regeneratorRuntime from \"/Users/thomasvu/Downloads/Coding/Deployed/React Apps/e-commerce/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Users/thomasvu/Downloads/Coding/Deployed/React Apps/e-commerce/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/Users/thomasvu/Downloads/Coding/Deployed/React Apps/e-commerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/thomasvu/Downloads/Coding/Deployed/React Apps/e-commerce/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/thomasvu/Downloads/Coding/Deployed/React Apps/e-commerce/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/thomasvu/Downloads/Coding/Deployed/React Apps/e-commerce/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/thomasvu/Downloads/Coding/Deployed/React Apps/e-commerce/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/thomasvu/Downloads/Coding/Deployed/React Apps/e-commerce/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/thomasvu/Downloads/Coding/Deployed/React Apps/e-commerce/src/App.js\";\nimport React from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { selectCurrentUser } from './redux/user/user.selector';\nimport './App.css';\nimport Header from './components/header/header.component';\nimport HomePage from './pages/homepage/homepage.component';\nimport ShopPage from './pages/shop/shop.component';\nimport Authentication from './pages/Authentication/Authentication.component';\nimport Checkout from './pages/checkout/checkout.component';\nimport { auth, createUserProfile, addCollection } from './firebase/firebase.utils';\nimport { setCurrentUser as _setCurrentUser } from './redux/user/user.actions';\nimport { selectCollectionsForPreview } from './redux/shop/shop.selector';\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.unsubscribeFromAuth = null;\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          setCurrentUser = _this$props.setCurrentUser,\n          collectionsArray = _this$props.collectionsArray;\n      this.unsubscribeFromAuth = auth.onAuthStateChanged(\n      /*#__PURE__*/\n      function () {\n        var _ref = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(userAuth) {\n          var userRef;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (!userAuth) {\n                    _context.next = 7;\n                    break;\n                  }\n\n                  _context.next = 3;\n                  return createUserProfile(userAuth);\n\n                case 3:\n                  userRef = _context.sent;\n                  userRef.onSnapshot(function (snapShot) {\n                    setCurrentUser({\n                      currentUser: _objectSpread({\n                        id: snapShot.id\n                      }, snapShot.data())\n                    });\n                  });\n                  _context.next = 8;\n                  break;\n\n                case 7:\n                  setCurrentUser(userAuth);\n\n                case 8:\n                  // Automate moving collections data to firebase\n                  addCollection('collections', collectionsArray.map(function (_ref2) {\n                    var title = _ref2.title,\n                        items = _ref2.items;\n                    return {\n                      title: title,\n                      items: items\n                    };\n                  }));\n\n                case 9:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unsubscribeFromAuth();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }), React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        component: HomePage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/shop\",\n        component: ShopPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/checkout\",\n        component: Checkout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/signin\",\n        render: function render() {\n          return _this2.props.currentUser ? React.createElement(Redirect, {\n            to: \"/\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 61\n            },\n            __self: this\n          }) : React.createElement(Authentication, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 61\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nvar mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser,\n  collectionsArray: selectCollectionsForPreview\n});\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setCurrentUser: function setCurrentUser(user) {\n      return dispatch(_setCurrentUser(user));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/Users/thomasvu/Downloads/Coding/Deployed/React Apps/e-commerce/src/App.js"],"names":["React","Route","Switch","Redirect","connect","createStructuredSelector","selectCurrentUser","Header","HomePage","ShopPage","Authentication","Checkout","auth","createUserProfile","addCollection","setCurrentUser","selectCollectionsForPreview","App","unsubscribeFromAuth","props","collectionsArray","onAuthStateChanged","userAuth","userRef","onSnapshot","snapShot","currentUser","id","data","map","title","items","Component","mapStateToProps","mapDispatchToProps","dispatch","user"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { selectCurrentUser } from './redux/user/user.selector';\nimport './App.css';\n\nimport Header from './components/header/header.component';\nimport HomePage from './pages/homepage/homepage.component';\nimport ShopPage from './pages/shop/shop.component';\nimport Authentication from './pages/Authentication/Authentication.component';\nimport Checkout from './pages/checkout/checkout.component';\nimport {\n  auth,\n  createUserProfile,\n  addCollection,\n} from './firebase/firebase.utils';\nimport { setCurrentUser } from './redux/user/user.actions';\nimport { selectCollectionsForPreview } from './redux/shop/shop.selector';\nclass App extends React.Component {\n  unsubscribeFromAuth = null;\n  componentDidMount() {\n    const { setCurrentUser, collectionsArray } = this.props;\n\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n      if (userAuth) {\n        const userRef = await createUserProfile(userAuth);\n        userRef.onSnapshot(snapShot => {\n          setCurrentUser({\n            currentUser: {\n              id: snapShot.id,\n              ...snapShot.data(),\n            },\n          });\n        });\n      } else {\n        setCurrentUser(userAuth);\n      }\n      // Automate moving collections data to firebase\n      addCollection(\n        'collections',\n        collectionsArray.map(({title, items}) => ({ title, items })),\n      );\n    });\n  }\n  componentWillUnmount() {\n    this.unsubscribeFromAuth();\n  }\n  render() {\n    return (\n      <div className='App'>\n        <Header />\n        <Switch>\n          <Route exact path='/' component={HomePage} />\n          <Route path='/shop' component={ShopPage} />\n          <Route exact path='/checkout' component={Checkout} />\n          <Route\n            exact\n            path='/signin'\n            render={() =>\n              this.props.currentUser ? <Redirect to='/' /> : <Authentication />\n            }\n          />\n        </Switch>\n      </div>\n    );\n  }\n}\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser,\n  collectionsArray: selectCollectionsForPreview,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user)),\n});\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(App);\n"]},"metadata":{},"sourceType":"module"}